# å€’è®¡æ—¶(Dao Ji Shi) Home Assistant é›†æˆ

[![hacs_badge](https://img.shields.io/badge/HACS-Custom-41BDF5.svg)](https://github.com/hacs/integration)

ä¸€ä¸ªä¸º Home Assistant è®¾è®¡çš„å€’è®¡æ—¶é›†æˆï¼Œå¯ä»¥ç®¡ç†çºªå¿µæ—¥ã€èŠ‚æ—¥å’Œé‡è¦äº‹ä»¶çš„å€’è®¡æ—¶ã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- ğŸ¯ **ä¸‰ä¸ªæ ¸å¿ƒå®ä½“**  
  - å€’è®¡æ—¶æ˜¾ç¤ºï¼šæ˜¾ç¤ºå³å°†åˆ°æ¥çš„äº‹ä»¶å€’è®¡æ—¶  
  - çºªå¿µæ—¥æ•°æ®ï¼šæŸ¥çœ‹æ‰€æœ‰çºªå¿µæ—¥æ•°æ®  
  - çºªå¿µæ—¥ç®¡ç†ï¼šç›´æ¥æ·»åŠ /åˆ é™¤çºªå¿µæ—¥  

- ğŸ“… **æ™ºèƒ½æ—¥æœŸå¤„ç†**  
  - è‡ªåŠ¨å¤„ç†é—°å¹´  
  - æ”¯æŒå†œå†èŠ‚æ—¥  
  - é‡è¦äº‹ä»¶ä¼˜å…ˆæ˜¾ç¤º  

- ğŸ¨ **ä¸­æ–‡æœ¬åœ°åŒ–**  
  - å®Œå…¨ä¸­æ–‡åŒ–çš„ç•Œé¢  
  - ä¸­æ–‡é”™è¯¯æç¤º  
  - æœ¬åœ°åŒ–é…ç½®  

- ğŸ”„ **å®æ—¶æ›´æ–°**  
  - è‡ªåŠ¨åˆ·æ–°å€’è®¡æ—¶  
  - æ•°æ®æŒä¹…åŒ–å­˜å‚¨  
  - é…ç½®å¯è°ƒæ•´æ›´æ–°é¢‘ç‡  

---

## ğŸ§© å®‰è£…æ–¹å¼

### âœ… é€šè¿‡ HACSï¼ˆæ¨èï¼‰

1. åœ¨ HACS ä¸­ç‚¹å‡»ã€Œé›†æˆã€  
2. ç‚¹å‡»å³ä¸Šè§’çš„ä¸‰ä¸ªç‚¹ï¼Œé€‰æ‹©ã€Œè‡ªå®šä¹‰ä»“åº“ã€  
3. æ·»åŠ ä»“åº“ï¼š  
   ```
   https://github.com/lambilly/dao_ji_shi
   ```
4. é€‰æ‹©åˆ†ç±»ä¸ºã€Œé›†æˆã€  
5. ç‚¹å‡»ã€Œä¸‹è½½ã€å®‰è£…  
6. é‡å¯ Home Assistant  

### ğŸ› ï¸ æ‰‹åŠ¨å®‰è£…

1. ä¸‹è½½ `dao_ji_shi` æ–‡ä»¶å¤¹  
2. å°†å…¶å¤åˆ¶åˆ°ä»¥ä¸‹ç›®å½•ï¼š  
   ```
   config/custom_components/
   ```
3. é‡å¯ Home Assistant  

---

## âš™ï¸ é…ç½®è¯´æ˜

1. åœ¨ Home Assistant ä¸­è¿›å…¥ã€Œé…ç½®ã€â†’ã€Œé›†æˆã€  
2. ç‚¹å‡»ã€Œæ·»åŠ é›†æˆã€  
3. æœç´¢ **å€’è®¡æ—¶**  
4. æŒ‰ç…§ç•Œé¢æç¤ºå®Œæˆé…ç½®  

### é…ç½®é€‰é¡¹
- **æ›´æ–°é—´éš”**ï¼šå€’è®¡æ—¶æ•°æ®çš„æ›´æ–°é¢‘ç‡ï¼ˆå•ä½ï¼šåˆ†é’Ÿï¼Œé»˜è®¤ 60 åˆ†é’Ÿï¼‰  

---

## ğŸ“¡ ä½¿ç”¨è¯´æ˜

### ä¸‰ä¸ªå®ä½“

1. **å€’è®¡æ—¶** (`sensor.dao_ji_shi_countdown`)  
   - æ˜¾ç¤ºå½“å‰æ—¥æœŸ  
   - å±æ€§ä¸­åŒ…å«è¯¦ç»†çš„å€’è®¡æ—¶ä¿¡æ¯  

2. **çºªå¿µæ—¥æ•°æ®** (`sensor.dao_ji_shi_anniversary_data`)  
   - æ˜¾ç¤ºæ‰€æœ‰çºªå¿µæ—¥æ•°æ®  
   - å±æ€§ä¸­åŒ…å«å®Œæ•´çš„çºªå¿µæ—¥åˆ—è¡¨  

3. **çºªå¿µæ—¥ç®¡ç†** (`sensor.dao_ji_shi_anniversary_manager`)  
   - ç”¨äºæ·»åŠ å’Œåˆ é™¤çºªå¿µæ—¥  
   - é€šè¿‡è®¾ç½®å±æ€§å’Œè°ƒç”¨æœåŠ¡æ¥ç®¡ç†  

---

### â• æ·»åŠ çºªå¿µæ—¥

1. è¿›å…¥ã€Œå¼€å‘è€…å·¥å…·ã€â†’ã€ŒçŠ¶æ€ã€  
2. æ‰¾åˆ° `sensor.dao_ji_shi_anniversary_manager` å®ä½“  
3. è®¾ç½®ä»¥ä¸‹å±æ€§ï¼š

| å±æ€§å | ç¤ºä¾‹å€¼ | è¯´æ˜ |
|--------|---------|------|
| `input_date` | `2025-03-06` | æ—¥æœŸ (æ ¼å¼: YYYY-MM-DD) |
| `input_name` | `ä¸ä¸ç”Ÿæ—¥` | äº‹ä»¶åç§° |
| `input_describe` | `ä¸ä¸ç”Ÿæ—¥` | äº‹ä»¶æè¿° |
| `input_type` | `important` | ç±»å‹ (normal / important / lunar) |
| `input_show` | `true` | æ˜¯å¦æ˜¾ç¤º |

4. è°ƒç”¨æœåŠ¡ï¼š  
   ```
   sensor.anniversary_manager_add_anniversary
   ```

---

### â– åˆ é™¤çºªå¿µæ—¥

1. è®¾ç½®å±æ€§ï¼š  
   ```
   delete_date: "2025-03-06"
   ```
2. è°ƒç”¨æœåŠ¡ï¼š  
   ```
   sensor.anniversary_manager_delete_anniversary
   ```

---

## ğŸ–¥ï¸ åœ¨ Lovelace ä¸­æ˜¾ç¤º

```yaml
type: entities
entities:
  - entity: sensor.dao_ji_shi_countdown
    name: å€’è®¡æ—¶
  - entity: sensor.dao_ji_shi_anniversary_data
    name: çºªå¿µæ—¥æ•°æ®
  - entity: sensor.dao_ji_shi_anniversary_manager
    name: çºªå¿µæ—¥ç®¡ç†
```

---

## ğŸ—‚ï¸ æ•°æ®æ ¼å¼

çºªå¿µæ—¥æ•°æ®å­˜å‚¨åœ¨ `anniversary.json` æ–‡ä»¶ä¸­ï¼š

```json
{
  "2025-01-01": {
    "name": "å…ƒæ—¦",
    "describe": "å…ƒæ—¦",
    "type": "normal",
    "show": true
  }
}
```

---

## ğŸ§° æ•…éšœæ’é™¤

### âŒ é›†æˆæ— æ³•åŠ è½½
- æ£€æŸ¥ Home Assistant ç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚  
- æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ä¸­çš„é”™è¯¯ä¿¡æ¯  

### ğŸ“… çºªå¿µæ—¥ä¸æ˜¾ç¤º
- ç¡®è®¤ `show` å­—æ®µè®¾ç½®ä¸º `true`  
- æ£€æŸ¥æ—¥æœŸæ ¼å¼æ˜¯å¦æ­£ç¡® (YYYY-MM-DD)  

### â±ï¸ å€’è®¡æ—¶è®¡ç®—é”™è¯¯
- ç¡®è®¤ç³»ç»Ÿæ—¶åŒºè®¾ç½®æ­£ç¡®  
- æ£€æŸ¥æ—¥æœŸæ˜¯å¦åœ¨æœªæ¥  

### ğŸªµ å¯ç”¨è°ƒè¯•æ—¥å¿—
åœ¨ `configuration.yaml` ä¸­æ·»åŠ ï¼š

```yaml
logger:
  default: info
  logs:
    custom_components.dao_ji_shi: debug
```

---

## ğŸ’¬ æ”¯æŒä¸åé¦ˆ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰åŠŸèƒ½å»ºè®®ï¼Œè¯·ï¼š
- æŸ¥çœ‹ [GitHub Issues](https://github.com/lambilly/dao_ji_shi/issues)
- æˆ–åˆ›å»ºæ–°çš„ Issueï¼Œæä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œæ—¥å¿—  

---

## ğŸ“œ è®¸å¯è¯
MIT License  

---

## ğŸ¤ è´¡çŒ®
æ¬¢è¿æäº¤ **Pull Request** ä¸ **Issue**ï¼  
ç”± **lambilly** å¼€å‘ â¤ï¸
